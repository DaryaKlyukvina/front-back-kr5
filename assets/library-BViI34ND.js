import{d as P,c as f,a as d,o as i,b as t,F as D,r as S,n as L,t as h,e as p,u as v,I as m,_ as B,f as U,g as b,h as C,w as g,v as w,i as M,j as _,k as T,T as F,l as R}from"./index-DEALjSkA.js";const j={class:"palette-card"},z={class:"card-colors"},J=["title"],O={class:"card-content"},Q={class:"palette-name"},q={class:"palette-date"},G={class:"card-actions"},H=P({__name:"PaletteCard",props:{palette:{}},emits:["load","duplicate","edit","delete"],setup(r){const y=r,c=f(()=>new Date(y.palette.createdAt).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}));return(o,n)=>(i(),d("div",j,[t("div",z,[(i(!0),d(D,null,S(r.palette.colors,a=>(i(),d("div",{key:a.id,class:"color-strip",style:L({backgroundColor:a.hex}),title:a.hex},null,12,J))),128))]),t("div",O,[t("h3",Q,h(r.palette.name),1),t("p",q,h(c.value),1),t("div",G,[t("button",{class:"btn-icon",onClick:n[0]||(n[0]=a=>o.$emit("load",r.palette)),title:"Загрузить"},[p(v(m),{icon:"mdi:download",width:"18",height:"18"})]),t("button",{class:"btn-icon",onClick:n[1]||(n[1]=a=>o.$emit("duplicate",r.palette.id)),title:"Дублировать"},[p(v(m),{icon:"mdi:content-copy",width:"18",height:"18"})]),t("button",{class:"btn-icon",onClick:n[2]||(n[2]=a=>o.$emit("edit",r.palette.id)),title:"Редактировать"},[p(v(m),{icon:"mdi:pencil",width:"18",height:"18"})]),t("button",{class:"btn-icon btn-delete",onClick:n[3]||(n[3]=a=>o.$emit("delete",r.palette.id)),title:"Удалить"},[p(v(m),{icon:"mdi:trash-can",width:"18",height:"18"})])])])]))}}),K=B(H,[["__scopeId","data-v-7f784817"]]),W={class:"library-page"},X={class:"page-intro"},Y={class:"intro-content"},Z={class:"intro-text"},tt={class:"container"},et={class:"controls-section"},lt={class:"filter-controls"},st={key:0,class:"palettes-grid"},at={key:1,class:"empty-state"},ot={class:"empty-icon"},nt=P({__name:"library",setup(r){const y=R(),c=U(),o=b(""),n=b("newest"),a=b(null),u=b(""),I=f(()=>c.palettesCount),$=f(()=>{let l=c.searchPalettes(o.value);switch(n.value){case"newest":l=[...l].sort((e,s)=>s.createdAt-e.createdAt);break;case"oldest":l=[...l].sort((e,s)=>e.createdAt-s.createdAt);break;case"name":l=[...l].sort((e,s)=>(e.name||"").localeCompare(s.name||"","ru"));break;case"colors":l=[...l].sort((e,s)=>s.colors.length-e.colors.length);break}return l}),V=l=>{localStorage.setItem("color-palette",JSON.stringify(l.colors)),y.push("/")},x=l=>{c.duplicatePalette(l)},A=l=>{const e=c.getPaletteById(l);e&&(a.value=l,u.value=e.name||"")},E=l=>{confirm("Удалить эту палитру?")&&c.removePalette(l)},k=()=>{a.value=null,u.value=""},N=()=>{a.value&&u.value.trim()&&(c.updatePalette(a.value,{name:u.value.trim()}),k())};return(l,e)=>(i(),d("div",W,[t("div",X,[t("div",Y,[t("p",Z,"Сохранённые палитры: "+h(I.value),1)])]),t("div",tt,[t("div",et,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),type:"text",placeholder:"Поиск по названию...",class:"search-input"},null,512),[[w,o.value]]),t("div",lt,[e[6]||(e[6]=t("label",{class:"filter-label"},"Сортировка:",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),class:"sort-select"},[...e[5]||(e[5]=[t("option",{value:"newest"},"Новые первыми",-1),t("option",{value:"oldest"},"Старые первыми",-1),t("option",{value:"name"},"По названию (А-Я)",-1),t("option",{value:"colors"},"По количеству цветов",-1)])],512),[[M,n.value]])])]),$.value.length>0?(i(),d("div",st,[(i(!0),d(D,null,S($.value,s=>(i(),C(K,{key:s.id,palette:s,onLoad:V,onDuplicate:x,onEdit:A,onDelete:E},null,8,["palette"]))),128))])):(i(),d("div",at,[t("div",ot,[p(v(m),{icon:"mdi:palette",width:"80",height:"80"})]),t("h2",null,h(o.value?"Ничего не найдено":"Библиотека пуста"),1),t("p",null,h(o.value?"Попробуйте изменить поисковый запрос":"Создайте палитру в генераторе и сохраните её"),1),o.value?_("",!0):(i(),d("button",{key:0,class:"btn-primary",onClick:e[2]||(e[2]=s=>l.$router.push("/"))}," Создать палитру "))]))]),(i(),C(F,{to:"body"},[a.value?(i(),d("div",{key:0,class:"modal-overlay",onClick:k},[t("div",{class:"modal-content",onClick:e[4]||(e[4]=T(()=>{},["stop"]))},[e[7]||(e[7]=t("h2",null,"Редактировать палитру",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.value=s),type:"text",placeholder:"Название палитры",class:"edit-input"},null,512),[[w,u.value]]),t("div",{class:"modal-actions"},[t("button",{class:"btn-secondary",onClick:k}," Отмена "),t("button",{class:"btn-primary",onClick:N}," Сохранить ")])])])):_("",!0)]))]))}}),dt=B(nt,[["__scopeId","data-v-41c72ba7"]]);export{dt as default};
